!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=5)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,n=e.src.length,o=e.width,r=e.height;(t=o*r/4e6)>1?(t=Math.sqrt(t),o/=t,r/=t):t=1;if(canvas.width=o,canvas.height=r,ctx.fillStyle="#fff",ctx.fillRect(0,0,canvas.width,canvas.height),(a=o*r/1e6)>1){a=~~(Math.sqrt(a)+1);var l=~~(o/a),c=~~(r/a);tCanvas.width=l,tCanvas.height=c;for(var i=0;i<a;i++)for(var u=0;u<a;u++)tctx.drawImage(e,i*l*t,u*c*t,l*t,c*t,0,0,l,c),ctx.drawImage(tCanvas,i*l,u*c,l,c)}else ctx.drawImage(e,0,0,o,r);var s=canvas.toDataURL("image/jpeg",.1);return console.log("压缩前："+n),console.log("压缩后："+s.length),console.log("压缩率："+~~(100*(n-s.length)/n)+"%"),tCanvas.width=tCanvas.height=canvas.width=canvas.height=0,s}},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=$("#username")[0].value;localStorage.setItem("username",e),console.log(localStorage)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(void 0==localStorage.getItem("username"))return void alert("请先输入名字");var t=e.target.files[0];if(console.log(t),["jpeg","png","gif","jpg"].indexOf(t.type.split("/")[1])<0)return void alert("文件格式不对");if(t.size>1024e4)return void alert("文件过大");if(!this.files.length)return;var a=new FileReader;t.size,t.size;a.onload=function(){var e=this.result,t=new Image;if(t.src=e,$(".photoinput").css("background-image","url("+e+")"),$(".cameraContainer").hide(),$(".add").hide(),e.length<=102400)return t=null,void localStorage.setItem("img",e);function a(){var e=(0,r.default)(t);localStorage.setItem("img",e);var a=localStorage.getItem("username");console.log(a),$.ajax({url:"http://n5vssq.natappfree.cc/u/upload",type:"POST",data:{b64f:e,name:a}}).done(function(){console.log("success")}).fail(function(){console.log("error")}).always(function(){console.log("complete")}),t=null}t.complete?a():t.onload=a},a.readAsDataURL(t)};var n,o=a(0),r=(n=o)&&n.__esModule?n:{default:n}},function(e,t,a){"use strict";r(a(0));var n=r(a(4)),o=r(a(3));function r(e){return e&&e.__esModule?e:{default:e}}var l,c;document.createElement("canvas").getContext("2d"),document.createElement("canvas").getContext("2d");function i(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null}document.getElementById("username").scrollIntoViewIfNeeded(),window.onload=void(void 0==localStorage.getItem("nickname")&&void 0==localStorage.getItem("headimgurl")?(window.location="https://wx.idsbllp.cn/MagicLoop/index.php?s=/addon/Api/Api/oauth&redirect=",l=i(l),c=i(c),localStorage.setItem("nickname",l),localStorage.setItem("headimgurl",c)):(l=localStorage.getItem("nickname"),c=localStorage.getItem("headimgurl"))),document.getElementById("username").addEventListener("change",o.default),document.getElementById("camera_image").addEventListener("change",n.default)}]);
//# sourceMappingURL=main.js.map